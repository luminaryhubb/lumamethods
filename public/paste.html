<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <title>Luma Paste</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen">
  <div class="bg-gray-900 p-6 rounded-xl shadow-xl w-full max-w-lg space-y-4">
    <h1 class="text-2xl font-bold text-purple-400 text-center">Criar Paste</h1>
    <form id="create-form" class="space-y-3">
      <textarea id="text" placeholder="Digite seu texto..." class="w-full p-2 rounded bg-gray-800"></textarea>
      <input id="password" type="password" placeholder="Senha" class="w-full p-2 rounded bg-gray-800"/>
      <input id="redirect" type="text" placeholder="Redirect opcional" class="w-full p-2 rounded bg-gray-800"/>
      <button class="px-6 py-3 rounded-full bg-purple-600 hover:bg-purple-500">Gerar</button>
    </form>
    <div id="result" class="text-center"></div>
  </div>

<script>
document.getElementById("create-form").addEventListener("submit", async e => {
  e.preventDefault();
  const text = document.getElementById("text").value;
  const password = document.getElementById("password").value;
  const redirect = document.getElementById("redirect").value;

  const res = await fetch("/api/create", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text, password, redirect })
  });

  const data = await res.json();
  if (data.id) {
    document.getElementById("result").innerHTML =
      `<p>Link criado: <a href="/paste/${data.id}" target="_blank" class="text-purple-400">/paste/${data.id}</a></p>`;
  } else {
    alert("Erro ao criar paste!");
  }
});
</script>
</body>
</html>
