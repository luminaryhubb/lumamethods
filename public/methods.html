<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Luma Methods</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: ui-monospace,"JetBrains Mono",monospace; background:#07070a; color:#fff; }
    .glass { background: rgba(17,24,39,0.7); backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.05); }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6">
  <div class="w-full max-w-4xl space-y-6">
    <h1 class="text-4xl font-bold text-purple-300 text-center">Luma Methods</h1>

    <div id="methods-list" class="grid md:grid-cols-2 gap-4"></div>

    <p class="text-xs text-neutral-400 text-center">
      Métodos são atualizados regularmente. Clique em qualquer um para visualizar detalhes.
    </p>
  </div>

<script>
(async function(){
  const listEl = document.getElementById("methods-list");

  async function loadMethods(){
    try {
      const r = await fetch("/api/methods");
      if(!r.ok) throw new Error("Falha ao carregar métodos");
      const data = await r.json();

      listEl.innerHTML = "";
      data.forEach(m=>{
        const card = document.createElement("div");
        card.className = "glass p-6 rounded-xl shadow-lg hover:shadow-purple-500/20 transition cursor-pointer";
        card.innerHTML = `
          <h2 class="text-xl font-semibold text-purple-300">${m.title}</h2>
          <p class="text-sm text-neutral-300 mt-2">${m.description || "Sem descrição"}</p>
          <div class="text-xs text-neutral-400 mt-3">Última atualização: ${new Date(m.updatedAt).toLocaleString()}</div>
        `;
        card.addEventListener("click",()=>{
          alert(m.content || "Sem conteúdo.");
        });
        listEl.appendChild(card);
      });

      if(data.length===0){
        listEl.innerHTML = `<div class="text-neutral-400 col-span-2 text-center">Nenhum método disponível</div>`;
      }
    } catch(e){
      listEl.innerHTML = `<div class="text-red-400 col-span-2 text-center">Erro: ${e.message}</div>`;
    }
  }

  loadMethods();
})();
</script>
</body>
</html>
