<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luma Methods - Dashboard</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-black overflow-hidden">
    <div id="root"></div>

    <script>
        // Função para checar autenticação
        async function checkAuth() {
            try {
                const res = await fetch('/api/user', { credentials: 'include' });
                if (!res.ok) throw new Error('Não autorizado');
                const user = await res.json();
                window.discordUser = user;
            } catch {
                window.location.href = '/';
            }
        }
        checkAuth();
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [user, setUser] = useState(null);

            useEffect(() => {
                const interval = setInterval(() => {
                    if (window.discordUser) {
                        setUser(window.discordUser);
                        clearInterval(interval);
                    }
                }, 200);
            }, []);

            if (!user) {
                return React.createElement('div', 
                    { className: 'text-white flex h-screen items-center justify-center' }, 
                    'Carregando...'
                );
            }

            // IDs que têm acesso ao botão admin
            const adminIDs = [
                '1411328138931077142', 
                '1066509829025300560', 
                '1420447434362060917'
            ];

            return React.createElement('div', 
                { className: 'flex flex-col items-center justify-center h-screen text-white space-y-6' },
                React.createElement('img', {
                    src: 'https://raw.githubusercontent.com/luminaryhubb/lumamethods/main/LM.gif',
                    className: 'w-32 h-32 mb-4 rounded-lg',
                    alt: 'Luma Methods'
                }),
                React.createElement('h2', {
                    className: 'text-2xl font-bold text-purple-500'
                }, `Bem-vindo(a), ${user.username}`),
                React.createElement('div', { className: 'flex flex-col space-y-4 mt-4' },
                    React.createElement('button', {
                        className: 'bg-purple-600 text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 hover:bg-purple-500 hover:scale-105 transform shadow-2xl'
                    }, 'Luma Rebuilder'),
                    React.createElement('button', {
                        className: 'bg-purple-600 text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 hover:bg-purple-500 hover:scale-105 transform shadow-2xl'
                    }, 'Luma Shortner'),
                    adminIDs.includes(user.id) && React.createElement('button', {
                        className: 'bg-red-600 text-white px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 hover:bg-red-500 hover:scale-105 transform shadow-2xl'
                    }, 'Admin')
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
