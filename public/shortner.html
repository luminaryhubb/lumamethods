<!doctype html>
<html lang="pt-BR">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Shortner - Luma</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-black overflow-hidden">
  <div id="root"></div>
  <script type="text/babel">
    const {useState,useEffect} = React;
    function Shortner(){
      const [url,setUrl]=useState('');
      const [resu,setResu]=useState(null);
      useEffect(()=>{ fetch('/api/user',{credentials:'include'}).then(r=>{ if(!r.ok) return window.location.href='/'; }); },[]);
      async function submit(e){ e.preventDefault(); const r=await fetch('/api/shortner',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({original:url})}); const j=await r.json(); if(r.ok) setResu(j); else alert('erro'); }
      return (<div className="min-h-screen flex items-center justify-center p-6 text-white"><div className="max-w-xl w-full space-y-6"><h1 className="text-2xl">Luma Shortner</h1><form onSubmit={submit} className="p-6 bg-neutral-900 rounded space-y-3"><input value={url} onChange={e=>setUrl(e.target.value)} placeholder="Cole o link aqui" className="w-full p-2 bg-neutral-800 rounded"/><div className="flex justify-end"><button className="px-4 py-2 bg-purple-600 rounded">Encurtar</button></div></form>{resu && <div className="p-4 bg-neutral-800 rounded">Short URL: <a href={resu.url} className="text-purple-400">{resu.url}</a></div>}</div></div>);
    }
    ReactDOM.createRoot(document.getElementById('root')).render(<Shortner/>);
  </script>
</body>
</html>
